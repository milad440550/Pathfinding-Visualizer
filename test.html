<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        // var items = [8, 2, 7, 5, 9, 3, 1];


        function genArray() {
            barsData = [];
            let min = -100000;
            let max = 100000;

            for (let i = 0; i < 500; i++) {
                barsData.push((Math.random() * (max - min) + min));
            }

            return barsData;
        }

        function quickSort(array) {
            function partition(low, high) {
                let pivot = array[high];
                let i = (low - 1);

                for (let j = low; j < high; j++) {
                    if (array[j] <= pivot) {
                        i++;
                        let temp = array[i];
                        array[i] = array[j];
                        array[j] = temp;
                    }
                }
                let temp = array[i + 1];
                array[i + 1] = array[high];
                array[high] = temp;
                return (i + 1);
            }

            function quickSort(low, high) {
                if (low < high) {
                    let pi = partition(low, high);
                    quickSort(low, pi - 1);
                    quickSort(pi + 1, high);
                }
            }

            quickSort(0, array.length - 1);
            return array;
        }
        function doTest() {
            for (let i = 0; i < 50; i++) {
                let arr = genArray();
                console.log(arr);

                let sortedArr = arr.slice();
                sortedArr.sort((a, b) => a - b);
                arr = quickSort(arr);

                if (sortedArr.isEquals(arr))
                    console.log(true);
                else
                    throw new Error("Your sort function is dirty AF")

            }
        }

        Array.prototype.isEquals = function (arr) {
            if (this.length !== arr.length) {
                return false;
            }

            for (let i = 0; i < this.length; i++) {
                if (this[i] !== arr[i])
                    return false;
            }

            return true;
        }

        // doTest();
        console.log(quickSort([9, 9, 9, 9, 9, 9, 9, 9, 9, 8, 7, 3, 4, 6, 5, 1, 2]))
    </script>
</body>

</html>